/**
 * @version $Id: mslider.js 114 2017-11-22 03:17:28Z szymon $
 * @package DJ-MediaTools
 * @subpackage DJ-MediaTools mslider layout
 * @copyright Copyright (C) 2017 DJ-Extensions.com, All rights reserved.
 * @license DJ-Extensions.com Proprietary Use License
 * @author url: http://dj-extensions.com
 * @author email contact@dj-extensions.com
 * @developer Szymon Woronowski - szymon.woronowski@design-joomla.eu
 *
 */
!function(i){var s=window.DJImageMslider=window.DJImageMslider||function(i,s){this.options={autoplay:0,transition:"linear",duration:800,delay:3e3,ifade_multiplier:2,visible:3,lag:100,wcag:1},this.init(i,s)};s.prototype=Object.create(DJImageSlideshow.prototype),s.prototype.init=function(s,e){var t=this;jQuery.extend(t.options,e),t.sliderIn=i("#"+s).find(".dj-mslider-in").first(),t.setVisible(),DJImageSlideshow.prototype.init.call(t,s,e)},s.prototype.setEffectsOptions=function(){var i=this;switch(DJImageSlideshow.prototype.setEffectsOptions.call(i),i.options.slider_type){case"up":case"down":i.options.lag&&(i.startEffect.top*=2,i.backEffect.top*=2);break;case"left":case"right":i.startEffect.left="100%",i.backEffect.left="-100%",i.endEffect.left="0%",i.options.lag&&(i.startEffect.left="200%",i.backEffect.left="-200%")}if(i.options.desc_effect)switch(i.options.desc_effect){case"left":case"right":i.desc_startEffect.marginLeft*=i.visible}},s.prototype.loadFirstSlide=function(){var s=this;s.slider.find(".dj-slides").first().css("opacity",0);for(var e=0;e<s.visible;e++)if(s.exist(e)){var t=i(s.slides[e]).find("img.dj-image").first(),o=function(i,t){i.length>1&&(i[1],i=i[0]),i.off("load",o),s.firstSlideLoaded(e)}.bind(s,[t,e]);t.on("load",o),s.preloadImage(e,!1)}},s.prototype.firstSlideLoaded=function(){var i=this;if(i.loading){for(s=0;s<i.visible;s++)if(!i.slides[s].loaded)return;i.loader.fadeOut(200),i.slider.find(".dj-slides").first().animate({opacity:1},200),setTimeout(function(){i.autoPlay()},i.options.delay+500);for(var s=i.visible;s<2*i.visible;s++)i.exist(s)&&i.preloadImage(s,!1);i.loading=0,i.options.kenburns&&i.slider.addClass("dj-kenburns")}},s.prototype.setSlidesEffects=function(){var s=this,e=s.options.width*s.visible+s.options.spacing*(s.visible-1),t=100*s.options.width/e,o=100*(s.options.width+s.options.spacing)/e;s.slides.css("width",t+"%");for(l=0;l<s.slides.length;l++)l>=s.current&&l<s.current+s.visible?(i(s.slides[l]).css("visibility",""),i(s.slides[l]).css(s.endEffect)):(i(s.slides[l]).css("visibility","hidden"),i(s.slides[l]).css(s.startEffect)),i(s.slides[l]).css("margin-left",o*(l%s.visible)+"%");if("ifade"==s.options.slider_type){s.images=[];for(var r=!!s.transform&&s.transform+" "+s.options.duration/2+"ms cubic-bezier(0.190, 1.000, 0.220, 1.000)",l=0;l<s.slides.length;l++)s.images[l]=i(s.slides[l]).find(".dj-image").first(),s.images[l].length&&(r?(s.images[l].css(s.transition,r),l>=s.current&&l<s.current+s.visible?s.images[l].css(s.transform,"scale(1)"):s.images[l].css(s.transform,"scale("+s.options.ifade_multiplier+")")):s.images[l].css("max-width","none"))}if(s.options.desc_effect)for(l=0;l<s.descriptions.length;l++)l>=s.current&&l<s.current+s.visible?(i(s.descriptions[l]).css("visibility",""),i(s.descriptions[l]).css(s.desc_endEffect)):(i(s.descriptions[l]).css("visibility","hidden"),i(s.descriptions[l]).css(s.desc_startEffect))},s.prototype.setIndicators=function(){var s=this;DJImageSlideshow.prototype.setIndicators.call(s),s.indicators.length&&s.indicators.each(function(e){indicator=i(this),e>=s.indicators.length/s.visible?indicator.css("display","none"):indicator.css("display","")})},s.prototype.loadSlide=function(s){var e=this;if(e.current!=s&&!e.loading){for(var t=!0,o=s;o<s+e.visible;o++)e.exist(o)&&i(e.slides[o]).find("img.dj-image").first().length&&!e.slides[o].loaded&&(e.preloadImage(o,!0),t=!1);if(t){e.slider.find(".dj-slides").first().css("min-height","");for(var r=e.current,l=0,o=0;o<e.visible;o++)setTimeout(function(i,s){i.length>1&&(s=i[1],i=i[0]),e.slide(i,s)}.bind(e,[r+o,s+o]),o*e.options.lag),i(e.slides[s+o]).outerHeight()>l&&(l=i(e.slides[s+o]).outerHeight());e.slider.find(".dj-slides").first().css("min-height",l);for(o=s+e.visible;o<s+2*e.visible;o++)e.exist(o)&&e.preloadImage(o,!1);e.setCurrentSlide(s)}}},s.prototype.setCurrentSlide=function(s){var e=this;DJImageSlideshow.prototype.setCurrentSlide.call(e,s),e.slides.removeClass("dj-visible");for(var t=s;t<s+e.visible;t++)e.exist(t)&&i(e.slides[t]).addClass("dj-visible")},s.prototype.responsive=function(){var s=this,e=s.visible;if(s.setVisible(),e!=s.visible){s.last=s.slides.length-s.slides.length%s.visible,s.last==s.slides.length&&(s.last-=s.visible),s.indicators.length&&s.indicators.each(function(e){indicator=i(this),e>=s.indicators.length/s.visible?indicator.css("display","none"):indicator.css("display","")});var t=s.current-s.current%s.visible;t>s.last&&(t=s.last),s.setCurrentSlide(t),s.setSlidesEffects()}s.slider.find(".dj-slides").first().css("min-height","");for(var o=0,r=0;r<s.visible;r++)i(s.slides[s.current+r]).outerHeight()>o&&(o=i(s.slides[s.current+r]).outerHeight());s.slider.find(".dj-slides").first().css("min-height",o),s.slides.removeClass("dj-visible");for(r=s.current;r<s.current+s.visible;r++)s.exist(r)&&i(s.slides[r]).addClass("dj-visible");DJImageSlideshow.prototype.responsive.call(s)},s.prototype.setVisible=function(){var i=this,s=i.getSize(i.sliderIn).x;i.visible=Math.ceil((s+i.options.spacing)/(i.options.width+i.options.spacing))}}(jQuery);