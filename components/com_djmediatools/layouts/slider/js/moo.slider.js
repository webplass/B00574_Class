/**
 * @version $Id: moo.slider.js 99 2017-08-04 10:55:30Z szymon $
 * @package DJ-MediaTools
 * @subpackage DJ-MediaTools slider layout
 * @copyright Copyright (C) 2017 DJ-Extensions.com, All rights reserved.
 * @license DJ-Extensions.com Proprietary Use License
 * @author url: http://dj-extensions.com
 * @author email contact@dj-extensions.com
 * @developer Szymon Woronowski - szymon.woronowski@design-joomla.eu
 *
 */
(function($){this.DJImageSlider=new Class({initialize:function(j,k){var l=10;var m=0;var n=0;var o=0;var p='slider'+j.id;var q=k.auto;var r=0;var s=0;var t=false;$('djslider'+j.id).fade('hide');var u=$('slider'+j.id).getChildren('li');if(Browser.ie8){var v=new Array();for(var i=0;i<j.visible_slides;i++){v[i]=u[i];v[i].fade('hide')}}u.each(function(){l+=j.slide_size;m++});n=m-j.visible_slides;var w;switch(j.slider_type){case'up':$(p).setStyle('position','relative');$(p).setStyle('top',0);$(p).setStyle('height',l);w=new Fx.Tween(p,{property:'top',duration:k.duration,transition:k.transition,link:'cancel'});break;case'down':$(p).setStyle('position','absolute');$(p).setStyle('bottom',0);$(p).setStyle('height',l);w=new Fx.Tween(p,{property:'bottom',duration:k.duration,transition:k.transition,link:'cancel'});break;case'left':$(p).setStyle('position','relative');$(p).setStyle('left',0);$(p).setStyle('width',l);w=new Fx.Tween(p,{property:'left',duration:k.duration,transition:k.transition,link:'cancel'});break;case'right':$(p).setStyle('position','absolute');$(p).setStyle('right',0);$(p).setStyle('width',l);w=new Fx.Tween(p,{property:'right',duration:k.duration,transition:k.transition,link:'cancel'});break;case'fade':case'ifade':default:u.setStyle('position','absolute');u.setStyle('top',0);u.setStyle('left',0);$(p).setStyle('width',j.slide_size);u.setStyle('opacity',0);u.setStyle('visibility','hidden');u[0].setStyle('opacity',1);u[0].setStyle('visibility','visible');u.set('tween',{property:'opacity',duration:k.duration});break}if(j.show_buttons==2){var x=new Fx.Tween('play'+j.id,{property:'opacity',duration:200,link:'cancel'}).set('opacity',0);var y=new Fx.Tween('pause'+j.id,{property:'opacity',duration:200,link:'cancel'}).set('opacity',0)}if(j.show_arrows==2){var z=new Fx.Tween('next'+j.id,{property:'opacity',duration:200,link:'cancel'}).set('opacity',0);var A=new Fx.Tween('prev'+j.id,{property:'opacity',duration:200,link:'cancel'}).set('opacity',0)}if(j.show_indicators==2){var B=new Fx.Tween('cust-navigation'+j.id,{property:'opacity',duration:200,link:'cancel'}).set('opacity',0)}if(j.show_arrows)$('next'+j.id).addEvents({'click':function(){if(j.show_buttons==2)hideNavigation();nextSlide()},'keydown':function(){var a='which'in event?event.which:event.keyCode;if(a==13||a==32){nextSlide();event.preventDefault();event.stopPropagation()}}});if(j.show_arrows)$('prev'+j.id).addEvents({'click':function(){if(j.show_buttons==2)hideNavigation();prevSlide()},'keydown':function(){var a='which'in event?event.which:event.keyCode;if(a==13||a==32){prevSlide();event.preventDefault();event.stopPropagation()}}});if(j.show_buttons)$('play'+j.id).addEvents({'click':function(){changeNavigation();q=1},'keydown':function(){var a='which'in event?event.which:event.keyCode;if(a==13||a==32){changeNavigation();q=1;if(j.show_buttons)$('pause'+j.id).focus();event.preventDefault();event.stopPropagation()}}});if(j.show_buttons)$('pause'+j.id).addEvents({'click':function(){changeNavigation();q=0},'keydown':function(){var a='which'in event?event.which:event.keyCode;if(a==13||a==32){changeNavigation();q=0;if(j.show_buttons)$('play'+j.id).focus();event.preventDefault();event.stopPropagation()}}});$('djslider-loader'+j.id).addEvents({'mouseenter':function(){if(j.show_buttons==2)showNavigation();if(j.show_arrows==2){z.start(1);A.start(1)}if(j.show_indicators==2){B.start(1)}r=1},'mouseleave':function(){if(j.show_buttons==2)hideNavigation();if(j.show_arrows==2){z.start(0);A.start(0)}if(j.show_indicators==2){B.start(0)}r=0},'swipe':function(a){if(a.direction=='left'){nextSlide()}else if(a.direction=='right'){prevSlide()}},'focus':function(e){$('djslider-loader'+j.id).fireEvent('mouseenter')},'keydown':function(){var a='which'in event?event.which:event.keyCode;if(a==37||a==39){if(a==39)nextSlide();else prevSlide();event.preventDefault();event.stopPropagation()}}});if($('cust-navigation'+j.id)){var C=$('cust-navigation'+j.id).getElements('.load-button');C.each(function(b,c){b.addEvents({'click':function(){if(!t&&!b.hasClass('load-button-active')){loadSlide(c)}},'keydown':function(){var a='which'in event?event.which:event.keyCode;if(a==13||a==32){if(!t&&!b.hasClass('load-button-active')){loadSlide(c);event.preventDefault();event.stopPropagation()}}}})})}function getSize(a){return a.measure(function(){return this.getSize()})}function responsive(){updateTabindex();var a=$('djslider-loader'+j.id).getParent();var b=getSize(a).x;b-=a.getStyle('padding-left').toInt();b-=a.getStyle('padding-right').toInt();var c=$('djslider'+j.id).getStyle('max-width').toInt();var d=getSize($('djslider'+j.id));var e=d.x;if(e>b){e=b}else if(e<=b&&e<c){e=(b>c?c:b)}var f=d.x/d.y;var g=e/f;$('djslider'+j.id).setStyle('width',e);$('djslider'+j.id).setStyle('height',g);switch(j.slider_type){case'up':case'down':var h=u[0].getStyle('padding-bottom').toInt();j.slide_size=(g+h)/j.visible_slides;l=m*j.slide_size+m;$(p).setStyle('height',l);u.setStyle('width',e);u.setStyle('height',j.slide_size-h);w.set(-j.slide_size*o);break;case'left':case'right':var h=u[0].getStyle('padding-right').toInt();j.slide_size=(e+h)/j.visible_slides;l=m*j.slide_size+m;$(p).setStyle('width',l);u.setStyle('width',j.slide_size-h);u.setStyle('height',g);w.set(-j.slide_size*o);break;case'fade':case'ifade':default:$(p).setStyle('width',e);u.setStyle('width',e);u.setStyle('height',g);break}if(j.show_buttons||j.show_arrows){button_pos=0;nav_pos=0;if(j.show_buttons||j.show_arrows)button_pos=$('navigation'+j.id).getPosition('djslider'+j.id).y;if(button_pos<0){$('djslider-loader'+j.id).setStyle('padding-top',-button_pos)}buttons_height=0;if(j.show_arrows){buttons_height=getSize($('next'+j.id)).y;buttons_height=Math.max(buttons_height,getSize($('prev'+j.id)).y)}if(j.show_buttons){buttons_height=Math.max(buttons_height,getSize($('play'+j.id)).y);buttons_height=Math.max(buttons_height,getSize($('pause'+j.id)).y)}button_pos+=buttons_height;padding=button_pos-g;if(padding>0){$('djslider-loader'+j.id).setStyle('padding-bottom',padding)}if(j.show_buttons||j.show_arrows){buttons_margin=$('navigation'+j.id).getStyle('margin-left').toInt()+$('navigation'+j.id).getStyle('margin-right').toInt();if(buttons_margin<0&&window.getSize().x<getSize($('navigation'+j.id)).x-buttons_margin){$('navigation'+j.id).setStyle('margin-left',0);$('navigation'+j.id).setStyle('margin-right',0)}}}}function updateActiveButton(c){if($('cust-navigation'+j.id))C.each(function(a,b){a.removeClass('load-button-active');if(b==c)a.addClass('load-button-active')})}function nextSlide(){if(o<n)loadSlide(o+1);else loadSlide(0)}function prevSlide(){if(o>0)loadSlide(o-1);else loadSlide(n)}function loadSlide(a){if(o==a)return;if(j.slider_type=='fade'||j.slider_type=='ifade'){if(t)return;t=true;prev_slide=o;o=a;makeFade(prev_slide)}else{o=a;w.start(-j.slide_size*o)}updateTabindex();updateActiveButton(o)}function makeFade(a){u[o].setStyle('visibility','visible');u[o].get('tween').start(1);u[a].get('tween').start(0).chain(function(){u[a].setStyle('visibility','hidden');t=false})}function hideNavigation(){if(!q){x.start(r,0).chain(function(){if(!s)$('play'+j.id).setStyle('display','none')})}else{y.start(r,0).chain(function(){if(!s)$('pause'+j.id).setStyle('display','none')})}s=0}function showNavigation(){if(!q){$('play'+j.id).setStyle('display','block');x.start(r,1)}else{$('pause'+j.id).setStyle('display','block');y.start(r,1)}s=1}function changeNavigation(){if(q){$('pause'+j.id).setStyle('display','none');if(j.show_buttons==2)y.set('opacity',0);$('play'+j.id).setStyle('display','block');if(j.show_buttons==2)x.set('opacity',1)}else{$('play'+j.id).setStyle('display','none');if(j.show_buttons==2)x.set('opacity',0);$('pause'+j.id).setStyle('display','block');if(j.show_buttons==2)y.set('opacity',1)}}function slidePlay(){setTimeout(function(){if(q&&!r)nextSlide();slidePlay()},k.delay)}function sliderLoaded(){$('djslider-loader'+j.id).setStyle('background','none');$('djslider'+j.id).fade('in');if(Browser.ie8){v.each(function(a){if(a)a.fade('in')})}responsive();if(j.show_buttons){play_width=getSize($('play'+j.id)).x;$('play'+j.id).setStyle('margin-left',-play_width/2);pause_width=getSize($('play'+j.id)).x;$('pause'+j.id).setStyle('margin-left',-pause_width/2);if(q){$('play'+j.id).setStyle('display','none')}else{$('pause'+j.id).setStyle('display','none')}}slidePlay()}function updateTabindex(){u.each(function(b,c){var d=b.getElements('a[href], input, select, textarea, button');if(o<=c&&c<o+j.visible_slides){d.each(function(a){a.removeProperty('tabindex')})}else{d.each(function(a){a.setProperty('tabindex',-1)})}})}if(j.preload)sliderLoaded.delay(j.preload);else window.addEvent('load',sliderLoaded);window.addEvent('resize',responsive)}})})(document.id);